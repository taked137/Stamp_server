# Stamp_server

## 概要

- [スタンプラリーアプリのリファクタリング版](https://github.com/taked137/Stamp_remake)で使用しているサーバサイドのプログラム
- AWSのEC2インスタンスにデプロイしてます
  - http://13.113.250.233:1323/

## 使用技術

- Go言語
  - echo
- AWS

## エンドポイント

- /regulation
  - GET
  - `regulation.txt`の内容を返す
- /stamp/quiz/:num
  - GET
  - クイズ番号`num`(1~6)に対応したクイズの画像を返す
- /stamp/image/:num
  - GET
  - クイズ番号`num`(1~6)に対応したクイズの画像のURLを返す
- /info
  - GET
  - インフォメーション一覧を返す
    - クエリパラメータによって得る情報を指定可能
      - limit
        - 情報の合計数
      - offset
        - 先頭から指定した値分スキップしてそれ以降の情報を返す
  - とりあえずの実装として乱数によってお知らせの内容を決定
- /user/create
  - POST
  - ユーザ登録
    - UUIDを発行して返す
    - 他ユーザとの名前の重複を避ける仕様
      - とりあえずの実装として"taked"と一致するユーザ名は登録できない
- /stamp/beacon
  - POST
  - ビーコンとGPSの値を用いた位置判定
    - とりあえずの実装
      - ビーコン, GPSでの判定は行わない
        - 1/6の確率で範囲外
        - 1/6の確率で範囲付近
        - 4/6の確率で範囲内
  - クイズ画像のURLを返す
- /stamp/judge
  - POST
  - クイズの正誤判定を行う
  - リクエスト内のクイズ番号と回答をもとに判定
- /user/goal
  - POST
  - ゴールの結果報告を行う
  - サーバでのゴール記録保存に用いる
